<hr>
<h2  class="mt-3">ادارة الكتب</h2>
 
<div class="container mt-5">
    <div class="row">
        <div class="col-md-12">
            <form [formGroup]="BookForm" (ngSubmit)="addBook()">
                <h3 class="adBook text-center mb-5">اضافة كتاب جديد</h3>
                <div class="row">
                     
                <div class="mb-3 col-md-3">
                    <label class="mb-2">صورة الكتاب</label>
                    <input (change)="onFileChange($event)" class="form-control" name="image" formControlName="image" type="file" />
                </div>
                    <div class="mb-3 col-md-3">
                        <label class="mb-2">اسم الكتاب</label>
                        <input class="form-control" name="name" formControlName="name" type="text" />
                    </div>
                    <div class="mb-3 col-md-3">
                        <label class="mb-2">سعر الكتاب</label>
                        <input class="form-control" name="price" formControlName="price" type="number" />
                    </div>
                    <div class="mb-3 col-md-3">
                        <label class="mb-2">مقدار الخصم</label>
                        <input class="form-control" name="discount" formControlName="discount" type="number" />
                    </div>
                </div>
                <div class="row">
                    
                    <div class="mb-3 col-md-4">
                        <label class="mb-2">سنة الاصدار</label>
                        <input class="form-control" name="publishYear" formControlName="publishYear" type="text" />
                    </div>
                    <div class="mb-3 col-md-4">
                        <label class="mb-2">عدد صفحات الكتاب</label>
                        <input class="form-control" name="pageCount" formControlName="pageCount" type="number" />
                    </div>
                    <div class="mb-3 col-md-4">
                        <label class="mb-2">مؤلف الكتاب</label>
                        <select class="form-select" name="author" formControlName="author">
                            <option [value]="author.id" name="author" *ngFor="let author of Authors">{{author.name}}</option>
                            
                          </select>
                    </div>
                </div>
               <div class="row">
                <div class="mb-3 col-md-4">
                    <label class="mb-2">دار النشر</label>
                    <select class="form-select"  name="publisher" formControlName="publisher">
                        <option [value]="publisher.id" name="publisher" *ngFor="let publisher of Publishers">{{publisher.name}}</option>
                      </select>
                </div>
                <div class="mb-3 col-md-4">
                    <label class="mb-2">المترجم</label>
                    <select class="form-select" name="translator" formControlName="translator">
                        <option [value]="translator.id" name="translator" *ngFor="let translator of Translators">{{translator.name}}</option>
                      </select>
                </div>
                <div class="mb-3 col-md-4">
                    <label class="mb-2">القسم</label>
                    <select class="form-select"  name="category" formControlName="category">
                        <option [value]="category.id" name="category" *ngFor="let category of Categories">{{category.name}}</option>
                      </select>
                </div>
                <div class="mb-3 ">
                    <label class="mb-2">عن الكتاب</label>
                    <textarea  class="form-control" name="about"  rows="3" formControlName="about" type="textarea" ></textarea >
                </div>

               </div>
            
                <button class="btn btn-success w-25 m-2" type="submit" *ngIf="!updateMood">اضافة</button>
                <button class="btn btn-primary w-25 m-2" type="submit" *ngIf="updateMood">تعديل</button>
                <button class="btn btn-danger w-25 m-2" type="submit" *ngIf="updateMood">الغاء</button>

            </form>
        </div>
    </div>
    <div class="row ">
        <div class="col-md-12 border-start border-2">
            <h3 class="text-center mb-4"> جميع الكتب</h3>
 
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">صورة الكتاب</th>
                        <th scope="col">الكتاب</th>
                        <th scope="col">سعر الكتاب</th>
                        <th scope="col">مقدار الخصم</th>
                        <th scope="col">عن الكتاب</th>
                        <th scope="col">سنة الاصدار</th>
                        <th scope="col">عدد الصفحات</th>
                        <th scope="col">المؤلف</th>
                        <th scope="col">دار النشر</th>
                        <th scope="col">المترجم</th>
                        <th scope="col">القسم</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let book of books; index as i">
                        <td>{{i+1}}</td>
                        <td><img [src]="book.image" alt="book" width="50"></td>
                        <td>{{book.name}}</td>
                        <td>{{book.price}}</td>
                        <td>{{book.discount}}</td>
                        <td>{{book.about}}</td>
                        <td>{{book.publishYear}}</td>
                        <td>{{book.pageCount}}</td>
                        <td>{{book.authorName}}</td>
                        <td>{{book.publisherName}}</td>
                        <td>{{book.translatorName}}</td>
                        <td>{{book.categoryName}}</td>
                        <td>
                            <button class="btn btn-danger" (click)="onDelete(i)">حذف</button>
                        </td>
                        <td>
                            <button class="btn btn-success" (click)="onUpdate(i)">تعديل</button>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>
       

    </div>
    

</div>
<hr>